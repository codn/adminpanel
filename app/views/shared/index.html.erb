<% provide(:page_title, @model.display_name) -%>
<div class="row-fluid">
  <%= render 'shared/add_resource_button' %>
</div>
<div class="row-fluid">
  <div class="widget widget-padding span12">
    <div class="widget-header">
      <%= content_tag(:i, nil, class: "fa fa-#{@model.icon}") %>
      <h5>
        <%= pluralize_es(@model.display_name) %>
      </h5>
    </div>
    <div class="widget-body">
      <div class="dataTables_wrapper form-inline">
        <table id="information-table" class="table table-striped table-bordered dataTable">
          <thead><!-- model attributes -->
            <tr>
              <% @model.display_attributes('index').each do |fields| %>
              <% fields.each do |attribute, properties| %>
                <% if properties['type'] != 'adminpanel_file_field' && properties['type'] != 'has_many' %>
                  <th><%= properties['label'] %></th>
                <% end %>
              <% end %>
              <% end %>
              <th><%= I18n.t('actions') %></th>
            </tr>
          </thead><!-- Ends model attributes -->
          <tbody>
            <% collection.each do |member| %>
              <tr>
              <% @model.display_attributes('index').each do |fields| %>
              <% fields.each do |attribute, properties| %>
                <% if properties["type"] == "wysiwyg_field" %>
                  <td><%= member.send(attribute).html_safe -%></td>
                <% elsif properties['type'] == 'belongs_to' %>
                  <td>
                    <%= parent_object_name(member, properties['model']) %>
                  </td>
                <% elsif properties['type'] == 'boolean' %>
                  <td><%= member.send(attribute) ? I18n.t('action.is_true') : I18n.t('action.is_false') %></td>
                <% elsif properties["type"] != "adminpanel_file_field" && properties["type"] != "has_many" %>
                  <td><%= member.send(attribute) -%></td>
                <% end %>
              <% end %>
              <% end %>
                <td>
                  <%= render 'shared/show_icon_button', resource: member %>

                  <%= render 'shared/edit_icon_button', resource: member, resource_name: @model.display_name %>

                  <%= render 'shared/delete_icon_button', resource: member %>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
        <div class="row-fluid">
          <div class="span6"></div>
          <div class="span6"></div>
        </div>
      </div>
    </div>
  </div>
</div>
